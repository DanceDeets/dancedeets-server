vm: true
runtime: custom
threadsafe: true
api_version: 1
module: default

manual_scaling:
  instances: 2

# At some point, we must swap vm_settings for resources
# And change runtime form 'vm' to 'custom'
vm_settings:
  machine_type: g1-small
  vm_runtime: python27
#resources:
#  cpu: .5
#  memory_gb: 1.3


#  has_docker_image: 'True'

#automatic_scaling:
#  max_idle_instances: 1
#  max_pending_latency: 500ms

#automatic_scaling:
#  min_num_instances: 1
#  max_num_instances: 5
#  cool_down_period_sec: 60
#  cpu_utilization:
#    target_utilization: 0.5

env_variables:
  GAE_USE_SOCKETS_HTTPLIB : '1'

inbound_services:
- warmup

handlers:
- url: /_pipeline(/.*)?
  script: pipeline.handlers._APP
- url: /_ah/queue/deferred
  script: google.appengine.ext.deferred.application
  login: admin
- url: /_ah/stats.*
  script: google.appengine.ext.appstats.ui.app
- url: /_ah/remote_api(/.*)?
  script: google.appengine.ext.remote_api.handler.application
- url: /dancedeets.png
  static_files: dancedeets.png
  upload: dancedeets.png
- url: /robots.txt
  static_files: robots.txt
  upload: robots.txt
- url: /favicon.ico
  static_files: favicon.ico
  upload: favicon.ico
- url: /vcss/.*
  static_dir: css
- url: /vjs/.*
  static_dir: js
- url: /css
  static_dir: css
- url: /js
  static_dir: js
- url: /dist/img
  static_dir: dist/img
- url: /dist/js
  static_dir: dist/js
- url: /assets/css
  static_dir: assets/css
- url: /assets/css/headers
  static_dir: assets/css/headers
- url: /assets/css/footers
  static_dir: assets/css/footers
- url: /assets/plugins
  static_dir: assets/plugins
- url: /assets/plugins/bootstrap/css
  static_dir: assets/plugins/bootstrap/css
- url: /assets/plugins/bootstrap/js
  static_dir: assets/plugins/bootstrap/js
- url: /assets/plugins/font-awesome/css
  static_dir: assets/plugins/font-awesome/css
- url: /assets/plugins/jquery
  static_dir: assets/plugins/jquery
- url: /assets/plugins/line-icons
  static_dir: assets/plugins/line-icons
- url: /assets/img
  static_dir: assets/img
- url: /assets/js
  static_dir: assets/js
- url: /assets/js/plugins
  static_dir: assets/js/plugins
- url: /images
  static_dir: images
- url: /tools/.*
  script: main.application
  login: admin
- url: /admin.*
  script: admin.app
  login: admin
- url: /events/admin.*
  script: main.application
  login: admin
- url: /tasks/.*
  script: main.application
  login: admin
- url: /_ereporter
  script: google.appengine.ext.ereporter.report_generator.application
  login: admin
- url: /mapreduce/worker_callback.*
  script: main.application
  login: admin
- url: /mapreduce/pipeline/images
  static_dir: mapreduce/lib/pipeline/ui/images
- url: /mapreduce(/.*)?
  script: mapreduce.main.APP
  login: admin
- url: /_ah/warmup
  script: main.application
  login: admin
- url: /oauth2callback
  script: oauth2client.appengine.application
- url: /oauth_setup
  script: servlets.oauth.application
- url: .*
  script: main.application

admin_console:
 pages:
 - name: Appstats
   url: /_ah/stats

skip_files:
- ^(.*/)?#.*#
- ^(.*/)?.*~
- ^(.*/)?.*\.py[co]
- ^(.*/)?.*/RCS/.*
- ^(.*/)?\..*
- ^(.*/)?.*\.db
- ^(.*/)?.*\.csv
- ^(.*/)?test_data(/.*)?
- ^local_data(/.*)?
- ^local_data2(/.*)?
- ^local_data3(/.*)?
- ^bower_components(/.*)?
- ^download(/.*)?
- ^node_modules(/.*)?
- ^snapshotted(/.*)?
- ^scratch(/.*)?
- ^grammar-processed.*
- ^full-logs.txt
- ^r/(.*)
- ^s/(.*)
- ^snapshotted(/.*)?
- ^tmp(/.*)?
- ^build(/.*)?
#- ^(.*/)?app\.yaml
#- ^(.*/)?app\.yml
#- ^(.*/)?index\.yaml
#- ^(.*/)?index\.yml
#- ^(.*/)?.*\.spt
