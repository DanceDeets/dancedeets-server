<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:fb="http://www.facebook.com/2008/fbml"
	xmlns:og="http://opengraphprotocol.org/schema/">
<head>
<title>Dance Deets</title>
    <meta property="og:title" content="Dance Deets"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="http://www.dancedeets.com/"/>
    <meta property="og:image" content="http://www.dancedeets.com/dancedeets.png"/>
    <meta property="og:site_name" content="Dance Deets"/>
    <meta property="fb:admins" content="701004"/>
    <meta property="fb:app_id" content="2347064084"/>
    <meta property="og:description"
          content="A website for tracking and notifying users about all upcoming events in the dance scene."/>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18831479-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<style type="text/css">
@font-face {
  font-family: "aaaiight-fat";
  src: url(/fonts/aaaiight-fat.ttf) format("truetype");
}

body {
	font-family: Verdana, Geneva, sans-serif;
}

.permission-name {
}
.permission-reason {
	display:block;
	padding-left: 40px;
}

#main {
	position: relative;
	width: 1000px;
}
#sign-in {
	position: absolute;
	right: 0px;
	top: 0px;
	padding: 5px;
	text-align: right
}
#left-hand {
	float: left;
	width: 700px;
}
#right-hand {
	float: right;
	width: 300px;
}
#find {
	float: left;
	padding: 5%;
}
#promote {
	float: right;
	padding: 5%;
}
#events {
	margin-left:auto;
	margin-right:auto;
	width:500px;
	padding-top: 50px;
	clear: both;
}

.click-box {
	cursor: pointer;
	cursor: hand;
}
.click-box a {
	text-decoration: none;
	color: black;
}
.click-hover {
	background-color: #d0d0d0;
}
.big-font {
	font-size: 200%;
	font-family: "aaaiight-fat";
	letter-spacing: 0.05em;
}
</style>
</head>
<body>

<div id="main">
<div id="sign-in">
#if $fb_user
  $fb_user.profile.name : <a href="/user/edit">Settings</a>
#else
  <fb:login-button onlogin="window.location.reload();" perms="user_location,rsvp_event,offline_access,email,user_events"></fb:login-button>
#end if
</div>
<div id="header">
<img src="/dancedeets.png" width=224 height=110>
</div>

<div id="left-hand">

<div id="find" class="click-box" onclick="window.location='/rankings';return false;">
<a href="/rankings">
<span class="big-font">Discover</span><br>
over
 #if $total_events
$total_events
#end if
dance events around the world
</a>
</div>

<div id="promote" class="click-box" onclick="window.location='/events/add';return false;">
<a href="/events/add">
<span class="big-font">Promote</span><br>
to 
#if $total_users
$total_users
#end if
dancers and their fans
</a>
</div>

<div id="events">
<div class="big-font">events near <span id="city_name"></span>:</div>
<!--TODO(lambert): replace with an accurate description!-->
<div id="events_list">
Loading events...
</div>
</div>

</div>

<div id="right-hand">
<fieldset style="border: 1px black solid">

<legend class="big-font" style="padding: 10px">Join the Scene</legend>

<b>City:</b> <input type=text name="city" id="signup-city">

<p><b>What interests you?</b>
<ul style="list-style-type: none">
<li><input type=radio name=user_type value="fan"> I watch dance events
<li><input type=radio name=user_type value="choreo"> I do hiphop choreo
<li><input type=radio name=user_type value="freestyle"> I do freestyle dance
<li><input type=radio name=user_type value="everything" checked> I love all dance
</ul>

<p><fb:login-button length="long" onlogin="window.location=getNextUrl();" perms="user_location,rsvp_event,offline_access,email,user_events"></fb:login-button>

</fieldset>

<p><a href="#" style="font-size:80%" onclick="$('#why_facebook').toggle();return true;">Why does DanceDeets use Facebook login?</a>

<div id="why_facebook" style="display:none">

<p>DanceDeets uses Facebook for a few reasons:
<ul>
<li>You don't need to create a special account for this site (new username, password, email address, location, etc)
<li>DanceDeets is a registry of Facebook events, which means it is built on top of the Facebook API, and requires you to login to work according to the Facebook Terms of Service.
</ul>

<p><a href="#" style="font-size:80%" onclick="$('#facebook_perms').toggle();return true;">Why does DanceDeets need so many Facebook permissions?</a>

<div id="facebook_perms" style="display:none">
<ul>
<li><span class="permission-name">Access my public information</span>: <span class="permission-reason">show you which of your friends are attending dance events.</span>
<li><span class="permission-name">Send me email</span>: <span class="permission-reason">emails you about upcoming dance events that meet your criteria and interest.</span>
<li><span class="permission-name">Access my data any time</span>: <span class="permission-reason">lets you get weekly emails with upcoming event info, even if you haven't been to www.dancedeets.com recently.</span>
<li><span class="permission-name">Manage my events</span>: <span class="permission-reason">lets you click "Attending" and add facebook events directly from DanceDeets.</span>
<li><span class="permission-name">Access my profile information (Events)</span>: <span class="permission-reason">shows you what events you are attending (or not attending).</span>
<li><span class="permission-name">Access my contact information (Current Location)</span>: <span class="permission-reason">only shows you dance events in your area.</span>
</ul>
</div>
</div>


</div>
</div>


<div id="fb-root"></div>
<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script type="text/javascript">
  google.load("jquery", "1.4.2");
  google.load("jqueryui", "1.8.1");

	function setupActions() {
		$(".click-box").hover(
			function () {
				$(this).addClass("click-hover");
			},
			function () {
				$(this).removeClass("click-hover");
			}
		);
	}

	function getLocation() {
		var short_city = 'New York';
		var city = "New York, NY";
		if (google.loader.ClientLocation &&
			google.loader.ClientLocation.address) {
			short_city = google.loader.ClientLocation.address.city;
			city = (
				google.loader.ClientLocation.address.city + " " +
				google.loader.ClientLocation.address.region  + " " +
				google.loader.ClientLocation.address.country_code
			);
		}
		var encoded_city = encodeURIComponent(city);
		$('#events_list').load('/events/relevant?ajax=1&user_location=' + encoded_city + '&distance=30&distance_units=miles&freestyle=FREESTYLE_DANCER&choreo=CHOREO_DANCER', setupActions);
		$('#signup-city').val(city);
		$('#city_name').html(short_city);
		setupActions();
	}
	google.setOnLoadCallback(getLocation);
</script>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>
  function getNextUrl() {
    return '$next';
  }

  function getLoginStatus(response) {
    if (response.session) {
      window.location = getNextUrl();
    }
  }
  FB.Event.subscribe('FB.loginStatus', getLoginStatus);
  FB.init({appId: '$api_key', status: true,
         cookie: true, xfbml: true});
</script>
</body>
</html>
