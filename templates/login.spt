<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:fb="http://www.facebook.com/2008/fbml"
	xmlns:og="http://opengraphprotocol.org/schema/">
<head>
<title>Dance Deets</title>
    <meta property="og:title" content="Dance Deets"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="http://www.dancedeets.com/"/>
    <meta property="og:image" content="http://www.dancedeets.com/dancedeets.png"/>
    <meta property="og:site_name" content="Dance Deets"/>
    <meta property="fb:admins" content="701004"/>
    <meta property="fb:app_id" content="2347064084"/>
    <meta property="og:description"
          content="A website for tracking and notifying users about all upcoming events in the dance scene."/>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18831479-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<style type="text/css">
body {
	font-family: sans-serif;
}

.permission-name {
}
.permission-reason {
	display:block;
	padding-left: 40px;
}

#main {
	position: relative;
	width: 1000px;
}
#sign-in {
	position: absolute;
	right: 0px;
	top: 0px;
	padding: 5px;
	text-align: right
}
#left-hand {
	float: left;
	width: 700px;
}
#right-hand {
	float: right;
	width: 300px;
}
#find {
	float: left;
	width: 50%;
}
#promote {
	float: right;
	width: 50%;
}
#events {
	padding-left: 20px;
	padding-top: 50px;
	clear: both;
}
.action {
	font-size: 300%
}

.icon-table {
	width: 100%
}

.icon-table td {
	//border: 1px solid grey;
	vertical-align: bottom;
}

</style>
</head>
<body>

<div id="main">
<div id="sign-in">
#if $fb_user
  $fb_user.profile.name : <a href="/user/edit">Settings</a>
#else
  <fb:login-button onlogin="window.location.reload();" perms="user_location,rsvp
_event,offline_access,email,user_events"></fb:login-button>
#end if
</div>
<div id="header">
<img src="/dancedeets.png">
</div>

<div id="left-hand">

<div id="find">
<img src="http://i3.campaignmonitor.com/uploads/images/icons/48x48/icon-48x48-magnifying_glass.png">
<span class="action">Find</span><br>
<a href="/rankings">
#if $total_events
$total_events
#end if
Dance Events, Worldwide, All-styles
</a>
</div>

<div id="promote">
<img src="http://www.softicons.com/download/business-icons/basic-2-icons-by-pixelmixer/png/48/megaphone.png">
<span class="action">Promote</span><br>
<a href="/events/add">
Reach
#if $total_users
$total_users
#end if
Dancers and Dance Fans
</a>
</div>

<div id="events">
<div style="font-size:200%">Upcoming Events Near You</div>
<!--TODO(lambert): replace with an accurate description!-->
<div id="events_list">
Loading events...
</div>
</div>

</div>

<div id="right-hand">
<fieldset style="border: 1px black solid">

<legend style="margin-left: 1em; padding: 0.2em 0.8em ">Sign Up</legend>

<b>What dance events do you like?</b><br>

<b>City:</b> <input type=text name="city" id="signup-city"><br>

<!-- TODO(lambert): get real images, check-in instead of hotlink. -->
<!-- TODO(lambert): move image info into tags.py. -->
<b>Freestyle:</b>
<table class="icon-table"
<tr>
<td>
<label for="freestyle_$freestyle_types[0]">
<img src="http://upload.wikimedia.org/wikipedia/commons/4/4b/Empty.gif" height="40" width="100%"><br>
<input type="radio" name="freestyle" value="$freestyle_types[0]" id="freestyle_$freestyle_types[0]">
Don't Care
</label>
</td>
<td>
<label for="freestyle_$freestyle_types[1]">
<img src="http://www.jointanimalservices.org/Gifs/eyes.gif"><br>
<input type="radio" name="freestyle" value="$freestyle_types[1]" id="freestyle_$freestyle_types[1]">
Fan
</label>
</td>
<td>
<label for="freestyle_$freestyle_types[2]">
<img src="http://myfavouriteforum.com/uploads/ficons/q2218862784_38887.jpg"><br>
<input type="radio" name="freestyle" value="$freestyle_types[2]" id="freestyle_$freestyle_types[2]" checked>
Dancer
</label>
</td>
</tr>
</table>

<b>Choreography:</b>
<table class="icon-table">
<tr>
<td>
<label for="choreo_$choreo_types[0]">
<img src="http://upload.wikimedia.org/wikipedia/commons/4/4b/Empty.gif" height="40" width="100%"><br>
<input type="radio" name="choreo" value="$choreo_types[0]" id="choreo_$choreo_types[0]">
Don't Care
</label>
</td>
<td>
<label for="choreo_$choreo_types[1]">
<img src="http://www.jointanimalservices.org/Gifs/eyes.gif"><br>
<input type="radio" name="choreo" value="$choreo_types[1]" id="choreo_$choreo_types[1]">
Fan
</label>
</td>
<td> 
<label for="choreo_$choreo_types[2]">
<img src="http://www.creativeantics.com/images/dance/cadanceimages/cadancethumb/jazztap_4291_29_T.jpg"><br>
<input type="radio" name="choreo" value="$choreo_types[2]" id="choreo_$choreo_types[2]" checked>
Dancer
</label>
</td>
</tr>
</table>

<p><fb:login-button length="long" onlogin="window.location=getNextUrl();" perms="user_location,rsvp_event,offline_access,email,user_events"></fb:login-button>

<p><a href="#" style="font-size:80%" onclick="$('#why_facebook').toggle();return true;">Why does DanceDeets use Facebook login?</a>

<div id="why_facebook" style="display:none">

<p>DanceDeets uses Facebook for a few reasons:
<ul>
<li>You don't need to create a special account for this site (new username, password, email address, location, etc)
<li>DanceDeets is a registry of Facebook events, which means it is built on top of the Facebook API, and requires you to login to work according to the Facebook Terms of Service.
</ul>

<p><a href="#" style="font-size:80%" onclick="$('#facebook_perms').toggle();return true;">Why does DanceDeets need so many Facebook permissions?</a>

<div id="facebook_perms" style="display:none">
<ul>
<li><span class="permission-name">Access my public information</span>: <span class="permission-reason">show you which of your friends are attending dance events.</span>
<li><span class="permission-name">Send me email</span>: <span class="permission-reason">emails you about upcoming dance events that meet your criteria and interest.</span>
<li><span class="permission-name">Access my data any time</span>: <span class="permission-reason">lets you get weekly emails with upcoming event info, even if you haven't been to www.dancedeets.com recently.</span>
<li><span class="permission-name">Manage my events</span>: <span class="permission-reason">lets you click "Attending" and add facebook events directly from DanceDeets.</span>
<li><span class="permission-name">Access my profile information (Events)</span>: <span class="permission-reason">shows you what events you are attending (or not attending).</span>
<li><span class="permission-name">Access my contact information (Current Location)</span>: <span class="permission-reason">only shows you dance events in your area.</span>
</ul>
</div>
</div>

</fieldset>

</div>
</div>


<div id="fb-root"></div>
<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script type="text/javascript">
  google.load("jquery", "1.4.2");
  google.load("jqueryui", "1.8.1");

	function getLocation() {
		var city = "New York, NY";
		if (google.loader.ClientLocation &&
			google.loader.ClientLocation.address) {
			var city = (
				google.loader.ClientLocation.address.city + " " +
				google.loader.ClientLocation.address.region  + " " +
				google.loader.ClientLocation.address.country_code
			);
		}
		var encoded_city = encodeURIComponent(city);
		$('#events_list').load('/events/relevant?ajax=1&user_location=' + encoded_city + '&distance=30&distance_units=miles&freestyle=FREESTYLE_DANCER&choreo=CHOREO_DANCER');
		$('#signup-city').val(city);
	}
	google.setOnLoadCallback(getLocation);
</script>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>
  function getNextUrl() {
    return '$next';
  }

  function getLoginStatus(response) {
    if (response.session) {
      window.location = getNextUrl();
    }
  }
  FB.Event.subscribe('FB.loginStatus', getLoginStatus);
  FB.init({appId: '$api_key', status: true,
         cookie: true, xfbml: true});
</script>
</body>
</html>
